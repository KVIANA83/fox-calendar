document.addEventListener("DOMContentLoaded", function() {
    const selectMes = document.querySelector('.meses select');
    const selectAno = document.querySelector('.anos select');
    const tbodyDias = document.querySelector('.dias');

    const meses = [
        { nome: 'JANEIRO', dias: 31 },
        { nome: 'FEVEREIRO', dias: 28 },
        { nome: 'MARÇO', dias: 31 },
        { nome: 'ABRIL', dias: 30 },
        { nome: 'MAIO', dias: 31 },
        { nome: 'JUNHO', dias: 30 },
        { nome: 'JULHO', dias: 31 },
        { nome: 'AGOSTO', dias: 31 },
        { nome: 'SETEMBRO', dias: 30 },
        { nome: 'OUTUBRO', dias: 31 },
        { nome: 'NOVEMBRO', dias: 30 },
        { nome: 'DEZEMBRO', dias: 31 }
    ];

    function atualizarDiasDoMes(mesSelecionado, anoSelecionado) {
        tbodyDias.innerHTML = '';
        const mes = meses.find(m => m.nome === mesSelecionado);
        const diasNoMes = mes.dias + (mesSelecionado === 'FEVEREIRO' && anoBissexto(anoSelecionado) ? 1 : 0);
        for (let i = 1; i <= diasNoMes; i++) {
            const tr = document.createElement('tr');
            const td = document.createElement('td');
            td.textContent = i;
            tr.appendChild(td);
            tbodyDias.appendChild(tr);
        }
    }

    function anoBissexto(ano) {
        return (ano % 4 === 0 && ano % 100 !== 0) || (ano % 400 === 0);
    }

    selectMes.addEventListener('change', function() {
        const mesSelecionado = this.value;
        const anoSelecionado = parseInt(selectAno.value);
        atualizarDiasDoMes(mesSelecionado, anoSelecionado);
    });

    selectAno.addEventListener('change', function() {
        const mesSelecionado = selectMes.value;
        const anoSelecionado = parseInt(this.value);
        atualizarDiasDoMes(mesSelecionado, anoSelecionado);
    });

    // Mostrar a data atual em tempo real
    function atualizarDataHora() {
        const dataAtual = new Date();
        const dia = dataAtual.getDate().toString().padStart(2, '0');
        const mes = (dataAtual.getMonth() + 1).toString().padStart(2, '0');
        const ano = dataAtual.getFullYear();
        const horas = dataAtual.getHours().toString().padStart(2, '0');
        const minutos = dataAtual.getMinutes().toString().padStart(2, '0');
        const segundos = dataAtual.getSeconds().toString().padStart(2, '0');

        document.querySelector('.dia span').textContent = dia;
        document.querySelector('.mes span').textContent = mes;
        document.querySelector('.ano-data span').textContent = ano;
        document.querySelector('.horas span').textContent = horas;
        document.querySelector('.minutos span').textContent = minutos;
        document.querySelector('.segundos span').textContent = segundos;
    }

    setInterval(atualizarDataHora, 1000);

    // Atualizar dias do mês atual ao carregar a página
    const mesAtual = meses[new Date().getMonth()].nome;
    const anoAtual = new Date().getFullYear();
    selectMes.value = mesAtual;
    selectAno.value = anoAtual;
    atualizarDiasDoMes(mesAtual, anoAtual);
    atualizarDataHora();
});
